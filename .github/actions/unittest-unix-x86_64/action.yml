---
name: Unit Test Unix Library (x86_64)

description: |
  Compile and test a unix build on unix for x86_64 cpus

inputs:
  compiler:
    required: true
    description: Compiler to use


runs:
  using: composite
  steps:
    - uses: ./.github/actions/compile-unix-x86_64
      with:
        compiler: ${{ inputs.compiler }}

    - name: Tests
      env:
        CC: ${{ inputs.compiler }}
        LD_LIBRARY_PATH: /usr/lib:/usr/local/lib
      shell: bash
      run: make test

